
; semicolons are comments
; all of this is data
; sequences of numbers are numbers
; all sequences of alphanumeric characters are strings
; strings containing whitespace should be wrapped in quotes
; (or for "emphasis")


(uservar int MiscVar 2048)


(struct WindowParamsType
	(WindowSize vec4)
	(WindowScale vec4)
	(ElapsedTime float))


(struct SomeType
	(Whatever mat4)
	(SomeArray array 10 float))



(struct WhatsitType
	(Moop SomeType))


(sampler LinearSampler
	(min GL_LINEAR)
	(mag GL_LINEAR))


(sampler PointSampler
	(min GL_NEAREST)
	(mag GL_NEAREST))


(buffer WindowParams WindowParamsType)


(format ColorFormat GL_TEXTURE_2D GL_RGBA8 LinearSampler)


(format DepthFormat GL_TEXTURE_2D GL_DEPTH_COMPONENT32F PointSampler)


(texture FancyTexture ColorFormat
	(src "woman_taking_in_cheese_from_fire_escape.png"))


(texture RedColorTarget ColorFormat
	(width ScreenWidth)
	(height ScreenHeight))


(texture BlueColorTarget ColorFormat
	(width ScreenWidth)
	(height ScreenHeight))


(texture SomeDepthTarget ColorFormat
	(width ScreenWidth)
	(height ScreenHeight))


(pipeline TextureTest
	(vs "shaders/splat.vs.glsl")
	(fs "shaders/texture.fs.glsl")
	(use SomeType)
	(in WindowParams)
	(in FancyTexture)
	(disable GL_DEPTH_TEST)
	(disable GL_CULL_FACE))


(pipeline SplatRed
	(vs "shaders/splat.vs.glsl")
	(fs "shaders/red.fs.glsl")
	(in WindowParams)
	(out RedColorTarget)
	(out SomeDepthTarget)
	(disable GL_DEPTH_TEST)
	(disable GL_CULL_FACE))


(pipeline SplatBlue
	(vs "shaders/splat.vs.glsl")
	(fs "shaders/blue.fs.glsl")
	(in WindowParams)
	(out BlueColorTarget)
	(out SomeDepthTarget)
	(disable GL_DEPTH_TEST)
	(disable GL_CULL_FACE))


(pipeline Combiner
	(vs "shaders/splat.vs.glsl")
	(fs "shaders/combiner.fs.glsl")
	(in WindowParams)
	(in RedColorTarget)
	(in BlueColorTarget))


(renderer TextureTest
	(update WindowParams)
	(draw TextureTest))


(renderer Multipass
	(update WindowParams)
	(draw SplatRed)
	(draw SplatBlue)
	(draw Combiner))
